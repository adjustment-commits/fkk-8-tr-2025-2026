<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">

<!-- ✅ PWA設定 -->
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#00a37a">
<link rel="apple-touch-icon" sizes="192x192" href="images/icon-192.png">
<link rel="apple-touch-icon" sizes="512x512" href="images/icon-512.png">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Next Season Fitness">

<title>Next Season Fitness｜FKK #8</title>

<style>
:root {
  --bg: #f7f7f7;
  --text: #222;
  --accent: #00a37a;
  --card: #fff;
  --border: #ddd;
}
body {
  margin: 0;
  background: var(--bg);
  font-family: 'Noto Sans JP', sans-serif;
  color: var(--text);
  line-height: 1.6;
}
header {
  background: var(--accent);
  color: #fff;
  text-align: center;
  padding: 12px 0;
  font-size: 1.1rem;
  letter-spacing: 0.03em;
}
main {
  padding: 16px;
  max-width: 480px;
  margin: auto;
}
section {
  background: var(--card);
  border-radius: 10px;
  padding: 12px 16px;
  margin-bottom: 16px;
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}
h2 {
  font-size: 1rem;
  margin-bottom: 8px;
  color: var(--accent);
}
.exercise-list button {
  width: 100%;
  background: #fff;
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 10px;
  text-align: left;
  margin-bottom: 6px;
  font-size: 0.95rem;
}
.exercise-list button:hover {
  background: #f0fdf7;
  border-color: var(--accent);
}
label {
  font-size: 0.9rem;
  display: block;
  margin-top: 10px;
}
input[type="number"], textarea {
  width: 100%;
  padding: 8px;
  font-size: 0.9rem;
  border: 1px solid var(--border);
  border-radius: 6px;
  margin-top: 4px;
}
input[type="range"] {
  width: 100%;
  margin-top: 6px;
}
.save-btn {
  background: var(--accent);
  color: #fff;
  border: none;
  width: 100%;
  padding: 12px;
  font-size: 1rem;
  border-radius: 8px;
  margin-top: 12px;
}
.save-btn:hover { opacity: 0.9; }

.feedback {
  background: #eefdf4;
  border-left: 4px solid var(--accent);
  padding: 8px;
  margin-top: 10px;
  font-size: 0.9rem;
  border-radius: 6px;
}
footer {
  text-align: center;
  font-size: 0.8rem;
  color: #888;
  margin-top: 20px;
  padding: 8px 0 20px;
}

/* Modal */
.modal {
  display: none;
  position: fixed;
  z-index: 100;
  left: 0; top: 0;
  width: 100%; height: 100%;
  background: rgba(0,0,0,0.4);
}
.modal-content {
  background: var(--card);
  border-radius: 10px;
  padding: 16px;
  margin: 60px auto;
  width: 90%;
  max-width: 400px;
  box-shadow: 0 4px 10px rgba(0,0,0,0.2);
}
.modal-content img {
  width: 100%;
  border-radius: 8px;
  margin-bottom: 10px;
}
.close {
  float: right;
  font-size: 1.2rem;
  font-weight: bold;
  cursor: pointer;
  color: var(--accent);
}
.close:hover { opacity: 0.7; }
</style>
</head>
<body>
<header>Next Season Fitness｜FKK #8</header>
<main>

<!-- ウォーミングアップ -->
<section>
  <h2>練習｜ウォーミングアップ</h2>
  <div class="exercise-list">
    <button data-ex="リブゲージ体幹5種">リブゲージ体幹5種（①〜⑤）</button>
  </div>
</section>

<!-- DAY1 -->
<section>
  <h2>DAY1｜呼吸性持久 × リブ安定</h2>
  <div class="exercise-list">
    <button data-ex="HEXバー・スプリントDL">HEXバー・スプリントDL</button>
    <button data-ex="自走式トレッドミル 10s×8">自走式トレッドミル 10s×8</button>
    <button data-ex="ハンドリリースプッシュアップ">ハンドリリースプッシュアップ</button>
    <button data-ex="スプリント・ランジステップ">スプリント・ランジステップ</button>
    <button data-ex="デッドバグマーチ">デッドバグマーチ</button>
  </div>
</section>

<!-- DAY2 -->
<section>
  <h2>DAY2｜可動性 × 反応性（バンド中心）</h2>
  <div class="exercise-list">
    <button data-ex="バンド・リブローテーション">バンド・リブローテーション</button>
    <button data-ex="TRX・ラテラルプランクリーチ">TRX・ラテラルプランクリーチ</button>
    <button data-ex="バンド・ヒップスライド">バンド・ヒップスライド</button>
    <button data-ex="トレッドミル 15s×10">トレッドミル 15s×10</button>
    <button data-ex="リアクション・バウンス">リアクション・バウンス</button>
  </div>
</section>

<!-- DAY3 -->
<section>
  <h2>DAY3｜反応持久＋リカバリー</h2>
  <div class="exercise-list">
    <button data-ex="トレッドミル 15s×45s×8">トレッドミル 15s×45s×8</button>
    <button data-ex="HEXバー・スプリントDL（軽負荷）">HEXバー・スプリントDL（軽負荷）</button>
    <button data-ex="リブリード・ヒップロール">リブリード・ヒップロール</button>
    <button data-ex="サイドリブ・プランク">サイドリブ・プランク</button>
    <button data-ex="スライドボード・ラテラルランジ（低強度）">スライドボード・ラテラルランジ（低強度）</button>
  </div>
</section>

<!-- 入力フォーム -->
<section>
  <h2>パフォーマンス入力</h2>
  <label>CMJ（cm）</label><input type="number" id="cmj">
  <label>RSI（m/s）</label><input type="number" id="rsi" step="0.01">
  <label>平均心拍（bpm）</label><input type="number" id="avgHR">
  <label>最大心拍（bpm）</label><input type="number" id="maxHR">
  <label>回復時間（秒）</label><input type="number" id="recoveryTime">
  <h2>主観RPE（疲労度）</h2>
  <input type="range" id="rpe" min="0" max="10" step="1"><div id="rpeVal">RPE: 0</div>
  <label>コメント</label><textarea id="comment" rows="3"></textarea>
  <button class="save-btn" id="saveBtn">データを保存</button>
  <div class="feedback" id="feedback"></div>
</section>

<footer>©︎adjustment-lab｜2025</footer>
</main>

<!-- モーダル -->
<div class="modal" id="exerciseModal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h3 id="exTitle"></h3>
    <img id="exImage" src="" alt="種目画像">
    <p id="exDetail"></p>
  </div>
</div>

<script>
// === 種目詳細 ===
const details = {
  // --- 既存維持 ---
  "リブゲージ体幹5種":"①リブシフト・プランク\n②サイドリブ・プランク\n③リブローテーション・ベア\n④リブリード・ヒップロール\n⑤リブローテーション・スフィンクス",
  "HEXバー・スプリントDL":"目的：股関節伸展と地面反力の連動。軸足膝の安定強化。\nフォーム：背中を反らさず胸郭を前に出す。バーはすねの真横を通す。\n負荷：60〜70%1RM ×5〜6回 ×3セット。\nミス：背部主導で引く、膝が内側に入る。",
  "自走式トレッドミル 10s×8":"目的：最大出力を短時間で繰り返す。VO₂max向上。\nフォーム：胸郭を前に送り、頭がブレないように。リブで地面を押す意識。\n負荷：全力10秒→レスト20秒×8本。\nミス：腕振りが先行、呼吸が止まる。",
  "ハンドリリースプッシュアップ":"目的：胸郭前方圧の維持と上肢出力耐性。\nフォーム：胸を地面につけて一瞬リリース、胸郭を押し出すように戻す。\n負荷：15回×3セット。\nミス：腰を反らす、肘主導になる。",
  "デッドバグマーチ":"目的：呼吸下で体幹を安定させながら四肢を動かす。\nフォーム：背中全体を床に接地、呼気で肋骨を下げながら脚を動かす。\n負荷：各脚10回×2セット。\nミス：腰が浮く、呼吸が止まる。",

  // --- Day2改訂バージョン（MB投擲不可・ケーブルなし対応） ---
  "バンド・リブローテーション":"目的：胸郭回旋と肩甲帯の連動を軽負荷で強化。\n方法：チューブを胸の高さで固定し、リブ主導で回旋。腕で引かない。\n回数：8〜10回×3セット。\nポイント：呼吸と回旋を同期させ、腹圧を維持。",
  "TRX・ラテラルプランクリーチ":"目的：側方安定性とリブ側屈の統合。\n方法：TRXを片手で保持し、反対側リブを引き下げながらプランク姿勢を保つ。\n回数：各側8回×2セット。\nポイント：肋骨を動かす意識で腕に頼らない。",
  "バンド・ヒップスライド":"目的：股関節と胸郭の滑走連動を養う。\n方法：チューブを骨盤にかけ、横方向にスライドしながらリブで制御。\n回数：8往復×2セット。\nポイント：股関節主導ではなくリブ主導で動かす。",
  "トレッドミル 15s×10":"目的：呼吸筋への持続刺激と酸素摂取効率の向上。\nフォーム：胸郭を前へ押し出し、腕を軽く振る。\n負荷：全力15秒→レスト30秒×10本。\nミス：前傾しすぎ、腰で走る。",
  "リアクション・バウンス":"目的：接地反応と呼吸リズムの再現性強化。\n方法：20秒間、軽いジャンプでテンポ変化に反応。\nポイント：呼吸と動作を同期。胸郭の弾性を感じる。",

  // --- Day3維持 ---
  "トレッドミル 15s×45s×8":"目的：回復力強化（有酸素＋心拍コントロール）。\nフォーム：胸郭で呼吸をコントロールしながら走る。\n負荷：全力15秒→レスト45秒×8本。HRmax80〜85%維持。\nミス：呼吸が浅く、胸郭が硬まる。",
  "HEXバー・スプリントDL（軽負荷）":"目的：疲労下での出力維持と安定性向上。\n方法：フォーム維持を優先し、50%1RM×6回×3セット。",
  "リブリード・ヒップロール":"目的：肋骨主導で骨盤を倒す連動性。\n方法：仰向けで両膝90°、肋骨で骨盤を左右に倒す。\n回数：10回×2セット。",
  "サイドリブ・プランク":"目的：胸郭の側方安定と腹斜筋活性。\n方法：サイドプランクで胸郭を上下に動かす。\n回数：各側10回×2セット。",
  "スライドボード・ラテラルランジ（低強度）":"目的：可動域の維持と股関節周囲のリカバリー。\n方法：滑る脚の接地感を保ちながら、低負荷でコントロール。\n回数：8回×2セット。"
};

// === モーダル ===
const modal=document.getElementById('exerciseModal');
const exTitle=document.getElementById('exTitle');
const exDetail=document.getElementById('exDetail');
const exImage=document.getElementById('exImage');
const closeBtn=document.querySelector('.close');
document.querySelectorAll('.exercise-list button').forEach(btn=>{
  btn.addEventListener('click',()=>{
    const ex=btn.dataset.ex;
    exTitle.textContent=ex;
    exDetail.textContent=details[ex]||"詳細情報なし。";
    exImage.src="images/noimage.jpg";
    modal.style.display='block';
  });
});
closeBtn.onclick=()=>modal.style.display='none';
window.onclick=e=>{if(e.target==modal)modal.style.display='none';};

// === RPEスライダー ===
const rpeSlider=document.getElementById('rpe');
const rpeVal=document.getElementById('rpeVal');
rpeSlider.addEventListener('input',()=>{rpeVal.textContent="RPE: "+rpeSlider.value;});

// === 保存処理 ===
document.getElementById('saveBtn').addEventListener('click',()=>{
  const data={
    cmj:document.getElementById('cmj').value,
    rsi:document.getElementById('rsi').value,
    avgHR:document.getElementById('avgHR').value,
    maxHR:document.getElementById('maxHR').value,
    recovery:document.getElementById('recoveryTime').value,
    rpe:rpeSlider.value,
    comment:document.getElementById('comment').value,
    date:new Date().toLocaleString()
  };
  localStorage.setItem('fitnessLog',JSON.stringify(data));
  showFeedback(data);
  alert('データを保存しました');
});

// === フィードバック ===
function showFeedback(data){
  let fb="";
  const cmj=parseFloat(data.cmj)||0;
  const rsi=parseFloat(data.rsi)||0;
  const hr=parseFloat(data.maxHR)||0;
  const rec=parseFloat(data.recovery)||0;
  const rpe=parseFloat(data.rpe)||0;
  if(cmj && cmj<64)fb+="出力発揮低下（股関節リード・リブ下制を再確認）<br>";
  if(rsi && rsi<2.2)fb+="反応性低下（リブシフト・ベアで再活性）<br>";
  if(hr>90&&rec>25)fb+="回復課題：呼吸・心拍制御強化。<br>";
  if(hr<85&&rpe>=8)fb+="主観負荷過多：動作効率の見直し。<br>";
  if(!fb)fb="良好：出力・反応・回復バランス安定。";
  document.getElementById('feedback').innerHTML=fb;
}
</script>
</body>
</html>
